// schema.prisma
datasource db {
  provider = "postgresql" // o mysql/sqlite seg√∫n uses
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  username  String   @unique
  password  String
  fotoId    Int?     
  foto      Foto?    @relation(fields: [fotoId], references: [id])
  
  pools     UsersPool[]
  ratesGiven  Rate[] @relation("RatesGiven")
  ratesReceived Rate[] @relation("RatesReceived")
}

model Foto {
  id   Int    @id @default(autoincrement())
  url  String
  
  users User[]
}

model Pool {
  id    Int         @id @default(autoincrement())
  nombre String
  users UsersPool[]
}

model UsersPool {
  id      Int  @id @default(autoincrement())
  userId  Int
  poolId  Int

  user User @relation(fields: [userId], references: [id])
  pool Pool @relation(fields: [poolId], references: [id])
}

model Rate {
  id         Int  @id @default(autoincrement())
  creadorId  Int
  receptorId Int
  rate       Int

  creador  User @relation("RatesGiven", fields: [creadorId], references: [id])
  receptor User @relation("RatesReceived", fields: [receptorId], references: [id])
}
